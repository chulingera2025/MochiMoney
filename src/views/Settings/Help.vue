<template>
  <div class="help-page">
    <AppHeader
      title="å¸®åŠ©åé¦ˆ"
      show-left-arrow
      @click-left="goBack"
    />

    <div class="help-content lazy-content" v-show="showContent" :class="{ 'fade-in': fadeIn }">
      <!-- ä½¿ç”¨å¸®åŠ© -->
      <div class="help-section lazy-card">
        <div class="section-title">
          <van-icon name="question-o" />
          ä½¿ç”¨å¸®åŠ©
        </div>

        <div class="help-items">
          <div class="help-item">
            <div class="help-icon">ğŸ“</div>
            <div class="help-text">
              <div class="help-title">å¦‚ä½•è®°è´¦ï¼Ÿ</div>
              <div class="help-desc">
                ç‚¹å‡»é¦–é¡µå³ä¸‹è§’çš„"+"æŒ‰é’®ï¼Œé€‰æ‹©æ”¶å…¥æˆ–æ”¯å‡ºï¼Œå¡«å†™é‡‘é¢ã€åˆ†ç±»ã€è´¦æˆ·ç­‰ä¿¡æ¯ï¼Œç‚¹å‡»ä¿å­˜å³å¯å®Œæˆè®°è´¦ã€‚
              </div>
            </div>
          </div>

          <div class="help-item">
            <div class="help-icon">ğŸ“Š</div>
            <div class="help-text">
              <div class="help-title">å¦‚ä½•æŸ¥çœ‹ç»Ÿè®¡ï¼Ÿ</div>
              <div class="help-desc">
                ç‚¹å‡»åº•éƒ¨å¯¼èˆªçš„"ç»Ÿè®¡"ï¼Œå¯ä»¥æŸ¥çœ‹æ”¶æ”¯è¶‹åŠ¿å›¾ã€åˆ†ç±»å æ¯”ã€è´¦æˆ·ç»Ÿè®¡ç­‰å¤šç»´åº¦æ•°æ®åˆ†æã€‚
              </div>
            </div>
          </div>

          <div class="help-item">
            <div class="help-icon">ğŸ·ï¸</div>
            <div class="help-text">
              <div class="help-title">å¦‚ä½•ç®¡ç†åˆ†ç±»ï¼Ÿ</div>
              <div class="help-desc">
                è¿›å…¥è®¾ç½® â†’ åˆ†ç±»ç®¡ç†ï¼Œå¯ä»¥æ·»åŠ ã€ç¼–è¾‘ã€åˆ é™¤è‡ªå®šä¹‰åˆ†ç±»ï¼Œè®¾ç½®åˆ†ç±»å›¾æ ‡å’Œé¢œè‰²ã€‚
              </div>
            </div>
          </div>

          <div class="help-item">
            <div class="help-icon">ğŸ’³</div>
            <div class="help-text">
              <div class="help-title">å¦‚ä½•ç®¡ç†è´¦æˆ·ï¼Ÿ</div>
              <div class="help-desc">
                è¿›å…¥è®¾ç½® â†’ è´¦æˆ·ç®¡ç†ï¼Œå¯ä»¥æ·»åŠ é“¶è¡Œå¡ã€æ”¯ä»˜å®ã€å¾®ä¿¡ç­‰ä¸åŒç±»å‹çš„è´¦æˆ·ï¼ŒæŸ¥çœ‹ä½™é¢å˜åŒ–ã€‚
              </div>
            </div>
          </div>

          <div class="help-item">
            <div class="help-icon">ğŸ”</div>
            <div class="help-text">
              <div class="help-title">å¦‚ä½•æœç´¢è®°å½•ï¼Ÿ</div>
              <div class="help-desc">
                åœ¨è®°å½•åˆ—è¡¨é¡µé¢ç‚¹å‡»æœç´¢æŒ‰é’®ï¼Œå¯ä»¥æŒ‰å…³é”®è¯ã€åˆ†ç±»ã€è´¦æˆ·ã€æ—¶é—´èŒƒå›´ç­‰æ¡ä»¶æœç´¢è®°å½•ã€‚
              </div>
            </div>
          </div>

          <div class="help-item">
            <div class="help-icon">âœï¸</div>
            <div class="help-text">
              <div class="help-title">å¦‚ä½•ä¿®æ”¹è®°å½•ï¼Ÿ</div>
              <div class="help-desc">
                åœ¨è®°å½•åˆ—è¡¨ä¸­ç‚¹å‡»ä»»æ„è®°å½•ï¼Œè¿›å…¥è¯¦æƒ…é¡µé¢ï¼Œç‚¹å‡»ç¼–è¾‘æŒ‰é’®å³å¯ä¿®æ”¹è®°å½•ä¿¡æ¯ã€‚
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- å¸¸è§é—®é¢˜ -->
      <div class="help-section lazy-card">
        <div class="section-title">
          <van-icon name="chat-o" />
          å¸¸è§é—®é¢˜
        </div>

        <van-collapse v-model="activeNames">
          <van-collapse-item title="æ•°æ®ä¼šä¸¢å¤±å—ï¼Ÿ" name="1">
            <div class="faq-answer">
              æœ¬åº”ç”¨é‡‡ç”¨çº¯å‰ç«¯æ¶æ„ï¼Œæ‰€æœ‰æ•°æ®éƒ½å­˜å‚¨åœ¨æ‚¨çš„è®¾å¤‡æœ¬åœ°ï¼Œä¸ä¼šä¸Šä¼ åˆ°æœåŠ¡å™¨ã€‚åªè¦ä¸æ¸…é™¤æµè§ˆå™¨æ•°æ®ï¼Œè®°å½•å°±ä¸ä¼šä¸¢å¤±ã€‚å»ºè®®å®šæœŸä½¿ç”¨æ•°æ®å¤‡ä»½åŠŸèƒ½ã€‚
            </div>
          </van-collapse-item>

          <van-collapse-item title="å¯ä»¥ç¦»çº¿ä½¿ç”¨å—ï¼Ÿ" name="2">
            <div class="faq-answer">
              æ˜¯çš„ï¼Œæœ¬åº”ç”¨æ”¯æŒPWAæŠ€æœ¯ï¼Œå¯ä»¥ç¦»çº¿ä½¿ç”¨ã€‚æ‚¨å¯ä»¥å°†åº”ç”¨æ·»åŠ åˆ°æ‰‹æœºæ¡Œé¢ï¼ŒåƒåŸç”Ÿåº”ç”¨ä¸€æ ·ä½¿ç”¨ã€‚
            </div>
          </van-collapse-item>

          <van-collapse-item title="å¦‚ä½•å¤‡ä»½æ•°æ®ï¼Ÿ" name="3">
            <div class="faq-answer">
              ç›®å‰æ•°æ®å¤‡ä»½åŠŸèƒ½æ­£åœ¨å¼€å‘ä¸­ï¼Œå³å°†æ”¯æŒæœ¬åœ°å¤‡ä»½å’Œäº‘ç«¯å¤‡ä»½ã€‚æ‚¨å¯ä»¥é€šè¿‡æµè§ˆå™¨çš„å¯¼å‡ºåŠŸèƒ½ä¸´æ—¶å¤‡ä»½æ•°æ®ã€‚
            </div>
          </van-collapse-item>

          <van-collapse-item title="æ”¯æŒå¤šè®¾å¤‡åŒæ­¥å—ï¼Ÿ" name="4">
            <div class="faq-answer">
              å½“å‰ç‰ˆæœ¬æš‚ä¸æ”¯æŒå¤šè®¾å¤‡åŒæ­¥ï¼Œæ•°æ®ä»…å­˜å‚¨åœ¨æœ¬åœ°ã€‚æœªæ¥ç‰ˆæœ¬å°†è€ƒè™‘æ·»åŠ äº‘ç«¯åŒæ­¥åŠŸèƒ½ã€‚
            </div>
          </van-collapse-item>

          <van-collapse-item title="å¦‚ä½•åˆ é™¤æ‰€æœ‰æ•°æ®ï¼Ÿ" name="5">
            <div class="faq-answer">
              æ‚¨å¯ä»¥é€šè¿‡æµè§ˆå™¨è®¾ç½®æ¸…é™¤æœ¬ç½‘ç«™çš„æ‰€æœ‰æ•°æ®ï¼Œæˆ–è€…ç­‰å¾…æ•°æ®æ¸…ç†åŠŸèƒ½ä¸Šçº¿ã€‚è¯·æ³¨æ„ï¼Œæ¸…é™¤åæ•°æ®æ— æ³•æ¢å¤ã€‚
            </div>
          </van-collapse-item>
        </van-collapse>
      </div>

      <!-- åŠŸèƒ½å»ºè®® -->
      <div class="help-section lazy-card">
        <div class="section-title">
          <van-icon name="bulb-o" />
          åŠŸèƒ½å»ºè®®
        </div>

        <div class="suggestion-content">
          <p class="suggestion-text">
            å¦‚æœæ‚¨æœ‰ä»»ä½•åŠŸèƒ½å»ºè®®æˆ–æ”¹è¿›æ„è§ï¼Œæˆ‘ä»¬éå¸¸æ¬¢è¿æ‚¨çš„åé¦ˆï¼æ‚¨çš„å»ºè®®å°†å¸®åŠ©æˆ‘ä»¬æ‰“é€ æ›´å¥½çš„è®°è´¦ä½“éªŒã€‚
          </p>

          <div class="suggestion-items">
            <div class="suggestion-item">
              <van-icon name="star-o" />
              <span>é¢„ç®—ç®¡ç†åŠŸèƒ½</span>
            </div>
            <div class="suggestion-item">
              <van-icon name="star-o" />
              <span>æ•°æ®å¯¼å…¥å¯¼å‡º</span>
            </div>
            <div class="suggestion-item">
              <van-icon name="star-o" />
              <span>æ™ºèƒ½åˆ†ç±»è¯†åˆ«</span>
            </div>
            <div class="suggestion-item">
              <van-icon name="star-o" />
              <span>å¤šå¸ç§æ”¯æŒ</span>
            </div>
          </div>
        </div>
      </div>

      <!-- è”ç³»æˆ‘ä»¬ -->
      <div class="help-section lazy-card">
        <div class="section-title">
          <van-icon name="service-o" />
          è”ç³»æˆ‘ä»¬
        </div>

        <div class="contact-content">
          <div class="contact-item" @click="copyToClipboard('chulingera2025@gmail.com')">
            <van-icon name="envelop-o" />
            <div class="contact-text">
              <div class="contact-label">é‚®ç®±åé¦ˆ</div>
              <div class="contact-value">chulingera2025@gmail.com</div>
            </div>
            <van-icon name="arrow" class="copy-icon" />
          </div>

          <div class="contact-item" @click="copyToClipboard('https://github.com/chulingera2025/MochiMoney')">
            <van-icon name="link-o" />
            <div class="contact-text">
              <div class="contact-label">Githubåœ°å€</div>
              <div class="contact-value">https://github.com/chulingera2025/MochiMoney</div>
            </div>
            <van-icon name="arrow" class="copy-icon" />
          </div>

          <div class="contact-item">
            <van-icon name="wechat" />
            <div class="contact-text">
              <div class="contact-label">å¾®ä¿¡ç¾¤</div>
              <div class="contact-value">æš‚æ— é“¾æ¥</div>
            </div>
          </div>
        </div>
      </div>

      <!-- æ„Ÿè°¢è¯­ -->
      <div class="thanks-section">
        <div class="thanks-text">
          <p>æ„Ÿè°¢æ‚¨ä½¿ç”¨ MochiMoneyï¼</p>
          <p>æ‚¨çš„æ”¯æŒæ˜¯æˆ‘ä»¬ä¸æ–­æ”¹è¿›çš„åŠ¨åŠ›</p>
        </div>
      </div>
    </div>

    <!-- å…¨å±€åŠ è½½çŠ¶æ€ -->
    <Loading v-if="isLoading" overlay />
  </div>
</template>

<script setup lang="ts">
import { ref, onMounted } from 'vue'
import { useRouter } from 'vue-router'
import { showToast } from 'vant'
import AppHeader from '@/components/common/AppHeader.vue'
import Loading from '@/components/common/Loading.vue'
import { useLazyLoad } from '@/composables/useLazyLoad'

const router = useRouter()

// ä½¿ç”¨æ‡’åŠ è½½
const { isLoading, showContent, fadeIn, showContentWithDelay } = useLazyLoad()

// æŠ˜å é¢æ¿æ¿€æ´»çš„é¡¹ç›®
const activeNames = ref(['1'])

const goBack = () => {
  router.back()
}

// å¤åˆ¶åˆ°å‰ªè´´æ¿
const copyToClipboard = async (text: string) => {
  try {
    await navigator.clipboard.writeText(text)
    showToast('å·²å¤åˆ¶åˆ°å‰ªè´´æ¿')
  } catch (error) {
    console.error('å¤åˆ¶å¤±è´¥:', error)
    showToast('å¤åˆ¶å¤±è´¥ï¼Œè¯·æ‰‹åŠ¨å¤åˆ¶')
  }
}

// é¡µé¢åˆå§‹åŒ–
const initPage = async () => {
  await new Promise(resolve => setTimeout(resolve, 50))
  showContentWithDelay(50)
}

// åˆå§‹åŒ–
onMounted(() => {
  initPage()
})
</script>

<style scoped>
.help-page {
  min-height: 100vh;
  background: var(--color-background);
}

.help-content {
  padding: var(--space-md);
  padding-bottom: var(--space-xl);
}

/* å¸®åŠ©åŒºå— */
.help-section {
  margin-bottom: var(--space-lg);
  background: var(--color-background-card);
  border-radius: var(--border-radius-lg);
  overflow: hidden;
  box-shadow: var(--shadow-sm);
}

.section-title {
  display: flex;
  align-items: center;
  gap: var(--space-sm);
  font-size: var(--font-size-lg);
  font-weight: 600;
  color: var(--color-text-primary);
  padding: var(--space-lg);
  border-bottom: 1px solid var(--color-border);
  background: var(--color-background-light);
}

.section-title .van-icon {
  color: var(--color-primary);
}

/* å¸®åŠ©é¡¹ç›® */
.help-items {
  padding: var(--space-md);
}

.help-item {
  display: flex;
  align-items: flex-start;
  gap: var(--space-md);
  padding: var(--space-md) 0;
  border-bottom: 1px solid var(--color-border);
}

.help-item:last-child {
  border-bottom: none;
}

.help-icon {
  font-size: 24px;
  width: 40px;
  text-align: center;
  margin-top: 2px;
}

.help-text {
  flex: 1;
}

.help-title {
  font-weight: 600;
  color: var(--color-text-primary);
  margin-bottom: var(--space-xs);
}

.help-desc {
  font-size: var(--font-size-sm);
  color: var(--color-text-secondary);
  line-height: 1.6;
}

/* å¸¸è§é—®é¢˜ */
.faq-answer {
  padding: var(--space-md);
  background: var(--color-background-light);
  border-radius: var(--border-radius-sm);
  font-size: var(--font-size-sm);
  color: var(--color-text-secondary);
  line-height: 1.6;
}

/* åŠŸèƒ½å»ºè®® */
.suggestion-content {
  padding: var(--space-lg);
}

.suggestion-text {
  color: var(--color-text-secondary);
  line-height: 1.6;
  margin: 0 0 var(--space-lg) 0;
}

.suggestion-items {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
  gap: var(--space-sm);
}

.suggestion-item {
  display: flex;
  align-items: center;
  gap: var(--space-xs);
  padding: var(--space-sm) var(--space-md);
  background: var(--color-background-light);
  border-radius: var(--border-radius-sm);
  font-size: var(--font-size-sm);
  color: var(--color-text-secondary);
}

.suggestion-item .van-icon {
  color: var(--color-warning);
}

/* è”ç³»æˆ‘ä»¬ */
.contact-content {
  padding: var(--space-lg);
}

.contact-item {
  display: flex;
  align-items: center;
  gap: var(--space-md);
  padding: var(--space-md) 0;
  border-bottom: 1px solid var(--color-border);
}

.contact-item:last-child {
  border-bottom: none;
}

.contact-item .van-icon {
  color: var(--color-primary);
  font-size: 20px;
}

.contact-text {
  flex: 1;
}

.contact-label {
  font-weight: 500;
  color: var(--color-text-primary);
  margin-bottom: 2px;
}

.contact-value {
  font-size: var(--font-size-sm);
  color: var(--color-text-secondary);
}

/* æ„Ÿè°¢è¯­ */
.thanks-section {
  text-align: center;
  margin-top: var(--space-lg);
  padding: var(--space-lg);
  background: linear-gradient(135deg, var(--color-primary-light), var(--color-success-light));
  border-radius: var(--border-radius-lg);
}

.thanks-text p {
  margin: 0;
  color: var(--color-text-primary);
  font-weight: 500;
  line-height: 1.6;
}

.thanks-text p:first-child {
  font-size: var(--font-size-lg);
  margin-bottom: var(--space-xs);
}

.thanks-text p:last-child {
  font-size: var(--font-size-sm);
  color: var(--color-text-secondary);
}

/* æŠ˜å é¢æ¿æ ·å¼è°ƒæ•´ */
:deep(.van-collapse-item__title) {
  font-weight: 500;
  color: var(--color-text-primary);
  background: var(--color-background-card);
}

:deep(.van-collapse-item__content) {
  background: var(--color-background);
}

:deep(.van-collapse-item__wrapper) {
  background: var(--color-background-card);
}

:deep(.van-collapse-item) {
  background: var(--color-background-card);
}
</style>
